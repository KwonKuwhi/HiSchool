<!DOCTYPE html>
<html lang="ko">

<head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <title>동아리 게시판</title>
   <link rel="stylesheet" href="/style.css" />
   <link rel="stylesheet" href="/myClubPostMain.css" />
   <!-- axios CDN -->
   <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body>

   <%- include('../component/header') %>
      <div class="container">
         <button onclick="createPost()" id="plus-button" class="plus-button">+</button>
         <!-- 게시물 목록 -->
         <div class="list-container">
            <% for(let i=0; i < data.length; i++) { %>
               <div class="list" onclick="showDetail('<%= data[i].post_id %>')">
                  <div class="list-name">
                     <%= data[i].name %>
                  </div>
                  <div class="list-title">
                     <%= data[i].title %>
                  </div>
                  <div class="list-content">
                     <%= data[i].content %>
                  </div>
                  <div class="list-content">
                     <!-- 지금 현재 시간은 출력되지만 YYYY-MM-DD 변경해줘야함 -->
                     <% var date=new Date(data[i].updatedAt); var year=date.getFullYear(); var month=('0' +
                        (date.getMonth() + 1)).slice(-2); var day=('0' + date.getDate()).slice(-2); var
                        hours=date.getHours(); var ampm=hours>= 12 ? '오후' : '오전';
                        hours = hours % 12;
                        hours = hours ? hours : 12; // 0 시는 12로 표시
                        var minutes = ('0' + date.getMinutes()).slice(-2);
                        %>

                        <%= year %>-<%= month %>-<%= day %>
                                 <%= ampm %>
                                    <%= hours %>시 <%= minutes %>분

                  </div>
               </div>
               <% } %>
         </div>
      </div>
      <script>
         const club_id = "<%= club_id %>";


         function showDetail(post_id) {
            window.location.href = `/myclubPostDetail/${club_id}/${post_id}`;
         }

         function createPost() {
            console.log("게시글 생성 요청 보냄", `/myclubNewPost/${club_id}`);
            window.location.href = `/myclubNewPost/${club_id}`;
         }

      </script>
</body>

</html>