<!DOCTYPE html>
<html lang="ko">

<head>
   <!-- 생략 (head 내용) -->

   <!-- axios CDN -->
   <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body>
   <%- include('../component/header') %>
      <div class="board">
         <!-- 게시글 세부 내용 -->
         <div class="post-detail">      
            <h2>
               <%= data.title %>
            </h2>
            <p>
               <%= data.content %>
            </p>
            <!-- 게시글 작성 시간 등의 메타 정보도 추가 있습니다. -->
         </div>
         <button class="btn btn-primary" onclick="deletepost()">삭제</button>

         <!-- 댓글 목록 -->
         <% clubPostComment.forEach(comment=> { %>
            <div class="comment">
               <div class="comment-body">
                  <%= comment.content %>
               </div>
               <div class="comment-footer">
                  <!-- 좋아요 수를 계산하는 로직 -->
               </div>
            </div>
            <% }) %>
      </div>
      <script>


         // DELETE /myclubPostDetail/:club_id/:post_id  : 동아리 게시글 삭제

         function deletepost() {
            if (confirm('게시글을 삭제하시겠습니까?')) {
               axios.delete('/myclubPostDetail/1/45')
                  .then(function (response) {
                     if (response.data.isDeleted) {
                        alert('게시글이 삭제되었습니다.');
                        window.location.href = '/myClubPostMain/1'; // 게시글 목록으로 리디렉션
                     } else {
                        alert('게시글 삭제에 실패했습니다.');
                     }
                  })
                  .catch(function (error) {
                     alert('게시글 삭제 중 오류가 발생했습니다.');
                     console.error('Delete error:', error);
                  });
            }
         }
      </script>
</body>

</html>