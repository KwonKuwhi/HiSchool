<!DOCTYPE html>
<html lang="ko">

<head>
   <!-- 생략 (head 내용) -->

   <!-- axios CDN -->
   <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body>
   <%- include('../component/header') %>
      <div class="board">
         <!-- 게시글 세부 내용 -->
         <div class="post-detail">
            <h2>
               <%= data.title %>
            </h2>
            <p>
               <%= data.content %>
            </p>
            <!-- 게시글 작성 시간 등의 메타 정보도 추가 있습니다. -->
         </div>

         <button class="btn btn-primary" onclick="editPost('<%= data.post_id %>')">수정</button>


         <div class="comment-section">
            <input type="text" id="commentInput" placeholder="댓글을 입력하세요">

         </div>

         <button onclick="submitComment(event)">댓글등록</button>
         <button onclick="editComment()">댓글수정</button>
         <button onclick="deletePostComment()">댓글삭제</button>
         <!-- 댓글 들어갈곳 -->
         <div class="list" id="commentList">
            <% clubPostComment.forEach(function(comment) { %>
               <div class="comment">
                  <p>
                     <%= comment.comment_name %>
                  </p>
                  <p>
                     <%= comment.content %>
                  </p>
                  <!-- 여기에 추가적인 댓글 정보나 버튼 등을 삽입할 수 있습니다. -->
               </div>
               <% }); %>
         </div>




         <script>
            console.log("<%=clubPostComment[0].content%>");


            const club_id = "<%=data.club_id%>";
            const post_id = "<%=data.post_id%>";

            // 댓글 등록
            function submitComment(event) {
               event.preventDefault();
               const commentContent = document.getElementById('commentInput').value;

               axios.post(`/myclubPostDetail/${club_id}/${post_id}/`, {
                  comment_name: "test", // 실제 사용자 이름 또는 ID
                  content: commentContent
               })
                  .then(res => {
                     console.log("댓글 등록 완료", res.data);

                  })
                  .catch(error => {
                     console.error("댓글 등록 에러:", error);
                  });
            }


            // 댓글 수정
            function editComment(commentId) {
               // 댓글 수정 로직
               console.log("댓글 수정", commentId);
               // 여기에 댓글 수정 로직을 구현하세요.
            }

            // 댓글 삭제
            function deleteComment(commentId) {
               axios.delete(`/api/comments/${club_id}/${post_id}/${commentId}`)
                  .then(res => {
                     console.log("댓글 삭제 완료", res.data);
                  })
                  .catch(error => {
                     console.error("댓글 삭제 에러:", error);
                  });
            }

            // 기존의 patchPostComment 및 deletePostComment 함수
         </script>
</body>

</html>